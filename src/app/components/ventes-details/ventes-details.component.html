<div class="ventes-details-container">
  <h2>Liste des Ventes</h2>
  <ul>
    <li *ngFor="let vente of ventes" (click)="showVenteDetails(vente)" class="clickable">
      <span>{{ vente.acheteur }} - {{ vente.date_transaction }} - {{ vente.prix_total }}€</span>
    </li>
  </ul>

  <h2>Créer une Nouvelle Vente</h2>
  <form [formGroup]="venteForm" (ngSubmit)="saveVente()">
    <div>
      <label for="acheteur">Acheteur :</label>
      <select id="acheteur" formControlName="acheteur">
        <option [ngValue]="null" disabled selected>-- Sélectionnez un acheteur --</option>
        <option *ngFor="let acheteur of acheteurs" [ngValue]="acheteur.id">
          {{ acheteur.name }}
        </option>
      </select>
    </div>

    <div>
      <label for="frais">Frais :</label>
      <input type="number" id="frais" formControlName="frais" />
    </div>

    <div>
      <label for="remise">Remise :</label>
      <input type="number" id="remise" formControlName="remise" />
    </div>

    <h3>Liste des Jeux Disponibles</h3>
    <table>
      <thead>
        <tr>
          <th>Intitulé</th>
          <th>Vendeur</th>
          <th>Prix Unitaire</th>
          <th>Quantité</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let jeu of jeuxDisponibles">
          <td>{{ jeu.intitule }}</td>
          <td>{{ jeu.vendeur }}</td>
          <td>{{ jeu.prix }}€</td>
          <td>
            <input type="number" [(ngModel)]="jeu.quantiteSelectionnee" min="1" [max]="jeu.quantites" />
          </td>
          <td>
            <button (click)="addJeuToVente(jeu)">Ajouter</button>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h3>Jeux Ajoutés</h3>
    <table>
      <thead>
        <tr>
          <th>Intitulé</th>
          <th>Quantité</th>
          <th>Prix Total</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let jeu of newJeux; let i = index">
          <td>{{ jeu.intitule }}</td>
          <td>{{ jeu.quantites }}</td>
          <td>{{ jeu.prix_unitaire * jeu.quantites }}€</td>
          <td>
            <button (click)="removeJeu(i)">Supprimer</button>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Total Prix: {{ totalPrix }}€</h3>  

    <button type="submit">Créer Vente</button>
  </form>
</div>